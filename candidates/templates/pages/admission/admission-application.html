
{% extends 'base.html' %}



{% load static %}
{% block title %}
    Admission Application

{% endblock %}

{% block scripts %}

 <script src="{% static '/themes/metronic/theme/default/demo1/dist/assets/js/pages/custom/wizard/wizard-1.js' %}"
         type="text/javascript"></script>
    <script src="{% static '/themes/metronic/theme/default/demo1/dist/assets/js/pages/crud/file-upload/dropzonejs.js' %}"
                                                             type="text/javascript">

    </script>


{% endblock %}
{% block body %}

<div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-wrapper" id="kt_wrapper">

    <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">

<!-- begin:: Subheader -->
<div class="kt-subheader   kt-grid__item" id="kt_subheader">
    <div class="kt-container  kt-container--fluid ">
        <div class="kt-subheader__main">
            <h3 class="kt-subheader__title">Admissions Application Wizard</h3>

                            <span class="kt-subheader__separator kt-hidden"></span>
                <div class="kt-subheader__breadcrumbs">
                    <a href="#" class="kt-subheader__breadcrumbs-home"><i class="flaticon2-shelter"></i></a>
                                            <span class="kt-subheader__breadcrumbs-separator"></span>
                        <a href="#" class="kt-subheader__breadcrumbs-link">
                            Pages                        </a>
                                            <span class="kt-subheader__breadcrumbs-separator"></span>
                        <a href="#" class="kt-subheader__breadcrumbs-link">
                            Wizard 2                        </a>
                                        <!-- <span class="kt-subheader__breadcrumbs-link kt-subheader__breadcrumbs-link--active">Active link</span> -->
                </div>
                    </div>
        <div class="kt-subheader__toolbar">
            <div class="kt-subheader__wrapper">
                                    <a href="#" class="btn kt-subheader__btn-primary">
                        Actions &nbsp;
                        <!--<i class="flaticon2-calendar-1"></i>-->
                    </a>

                <div class="dropdown dropdown-inline" data-toggle="kt-tooltip" title="Quick actions" data-placement="left">
                    <a href="#" class="btn btn-icon"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon kt-svg-icon--success kt-svg-icon--md">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon points="0 0 24 0 24 24 0 24"/>
        <path d="M5.85714286,2 L13.7364114,2 C14.0910962,2 14.4343066,2.12568431 14.7051108,2.35473959 L19.4686994,6.3839416 C19.8056532,6.66894833 20,7.08787823 20,7.52920201 L20,20.0833333 C20,21.8738751 19.9795521,22 18.1428571,22 L5.85714286,22 C4.02044787,22 4,21.8738751 4,20.0833333 L4,3.91666667 C4,2.12612489 4.02044787,2 5.85714286,2 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
        <path d="M11,14 L9,14 C8.44771525,14 8,13.5522847 8,13 C8,12.4477153 8.44771525,12 9,12 L11,12 L11,10 C11,9.44771525 11.4477153,9 12,9 C12.5522847,9 13,9.44771525 13,10 L13,12 L15,12 C15.5522847,12 16,12.4477153 16,13 C16,13.5522847 15.5522847,14 15,14 L13,14 L13,16 C13,16.5522847 12.5522847,17 12,17 C11.4477153,17 11,16.5522847 11,16 L11,14 Z" fill="#000000"/>
    </g>
</svg>                        <!--<i class="flaticon2-plus"></i>-->
                    </a>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- end:: Subheader -->

					<!-- begin:: Content -->
	<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
		<div class="kt-portlet">
	<div class="kt-portlet__body kt-portlet__body--fit">
		<div class="kt-grid kt-wizard-v1 kt-wizard-v1--white" id="kt_wizard_v1" data-ktwizard-state="step-first">
			<div class="kt-grid__item">
				<!--begin: Form Wizard Nav -->
				<div class="kt-wizard-v1__nav">
					<!--doc: Remove "kt-wizard-v1__nav-items--clickable" class and also set 'clickableSteps: false' in the JS init to disable manually clicking step titles -->
					<div class="kt-wizard-v1__nav-items kt-wizard-v1__nav-items--clickable">
						<div class="kt-wizard-v1__nav-item" data-ktwizard-type="step" data-ktwizard-state="current">
							<div class="kt-wizard-v1__nav-body">
								<div class="kt-wizard-v1__nav-icon">
									<i class="flaticon-file-1"></i>
								</div>
								<div class="kt-wizard-v1__nav-label">
									1. Provide Education Info
								</div>
							</div>
						</div>

						<div class="kt-wizard-v1__nav-item"  data-ktwizard-type="step">
							<div class="kt-wizard-v1__nav-body">
								<div class="kt-wizard-v1__nav-icon">
									<i class="flaticon-add"></i>
								</div>
								<div class="kt-wizard-v1__nav-label">
									2. Select Degrees & Priorities
								</div>
							</div>
						</div>

                        <div class="kt-wizard-v1__nav-item"  data-ktwizard-type="step">
							<div class="kt-wizard-v1__nav-body">
								<div class="kt-wizard-v1__nav-icon">
									<i class="flaticon-list"></i>
								</div>
								<div class="kt-wizard-v1__nav-label">
									3. Confirm Information
								</div>
							</div>
						</div>


                        <div class="kt-wizard-v1__nav-item"  data-ktwizard-type="step">
							<div class="kt-wizard-v1__nav-body">
								<div class="kt-wizard-v1__nav-icon">
									<i class="flaticon-like"></i>
								</div>
								<div class="kt-wizard-v1__nav-label">
									6. Done
								</div>
							</div>
						</div>
					</div>
				</div>
				<!--end: Form Wizard Nav -->

			</div>
			<div class="kt-grid__item kt-grid__item--fluid kt-wizard-v1__wrapper">
				<!--begin: Form Wizard Form-->
				<form method="post" action="{% url 'apply_admission' %}" class="kt-form" id="kt_form">
                {% csrf_token %}
                    <input type="hidden" name="degree_id" value="{{ degree_id }}"/>
                    <input type="hidden" name="degree_level" value="{{  degree_level  }}"/>
					<!--begin: Form Wizard Step 1-->
                <div class="kt-wizard-v1__content" data-ktwizard-type="step-content" data-ktwizard-state="current">
						  {% if degree_level == 'BS' %}
                            {% include 'pages/admission/components/bs.html'  %}
                            {% elif degree_level == 'MPhill' %}
                              {% include 'pages/admission/components/mphill.html' %}
                            {% elif degree_level == 'Phd' %}
                              {% include 'pages/admission/components/phd.html'  %}
                          {% endif %}

                <input type="button" id="step_1" class="btn btn-brand btn-md btn-tall
                 btn-wide kt-font-bold kt-font-transform-u" value="Next"/>


				</div>

					<!--end: Form Wizard Step 1-->

                    <div class="kt-wizard-v1__content" data-ktwizard-type="step-content">
						<div class="kt-heading kt-heading--md">Select From Available Programs</div>

                        <div class="kt-form__section kt-form__section--first" style="overflow: hidden;">
                                    {% include 'pages/admission/components/priority.html' %}

                        </div>
                          <input type="button" id="step_2" class="btn btn-brand btn-md btn-tall
                                    btn-wide kt-font-bold kt-font-transform-u" value="Next"/>
                    </div>


					<!--begin: Form Wizard Step 2-->
					<div class="kt-wizard-v1__content" data-ktwizard-type="step-content">

						<div class="kt-heading kt-heading--md">Verify Your Information</div>
						    <div class="kt-form__section kt-form__section--first">
                                <p>If any of the information you have provided is wrong, please correct it now by going to previous step, then come back here to continue.</p>

                            <div class="kt-wizard-v1__review">

							    {% if degree_level == 'BS' %}

                                    {% include 'pages/admission/components/verifyinfo/bs.html' %}

                                  {% elif degree_level == 'MPhill' %}
                                        {% include 'pages/admission/components/verifyinfo/mphill.html' %}
                                {% elif degree_level == 'Phd' %}
                                        {% include 'pages/admission/components/verifyinfo/phd.html'  %}

                                {% endif %}






                            <!-- starting table -->



                            <!-- ending table -->





                            <table class="table table-striped col-8" id="priority_table">
                              <thead>
                                <tr>
                                  <th scope="col">priority</th>
                                  <th scope="col">Program</th>

                                </tr>
                              </thead>
                              <tbody>


                              </tbody>
                            </table>
                              <div class="form-group row">
                                    <label class="col-6 col-form-label">Yes, I have verified my information</label>
                                    <div class="col-6">
                                        <span class="kt-switch kt-switch--outline kt-switch--icon kt-switch--success">
                                            <label>
                                                <input type="checkbox" name="verification_status">
                                                <span></span>
                                            </label>
                                        </span>
                                    </div>
                                </div>

                             <input type="button" id="step_3" class="btn btn-brand btn-md btn-tall
                                    btn-wide kt-font-bold kt-font-transform-u" value="Next"/>

							</div>
						</div>
					</div>

{#					<div class="kt-wizard-v1__content" data-ktwizard-type="step-content">#}
{##}
{#                        <div class="custom-file">#}
{#                                <input type="file" class="custom-file-input" id="customFile">#}
{#                                <label class="custom-file-label" for="customFile">Choose file</label>#}
{#                            </div>#}
{#					</div>#}

					<div class="kt-wizard-v1__content" data-ktwizard-type="step-content">
						<div class="kt-heading kt-heading--md">Once you submit application, challan form will be available to dashboard</div>
						<div class="kt-form__section kt-form__section--first">
                            <p>Download challan form & send its copy for verification</p>



                         </div>
                    </div>
                    <!--end: Form Wizard Step 6-->

					<!--begin: Form Actions -->
					<div class="kt-form__actions">
						<button class="btn btn-secondary btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u" data-ktwizard-type="action-prev">
							Previous
						</button>
						<button class="btn btn-success btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u" data-ktwizard-type="action-submit">
							Submit
						</button>

						<button id="nextbtn" class="btn btn-brand btn-md btn-tall btn-wide kt-font-bold kt-font-transform-u" data-ktwizard-type="action-next">
							Next Step
						</button>
					</div>
					<!--end: Form Actions -->
				</form>
				<!--end: Form Wizard Form-->
			</div>
		</div>
	</div>
</div>
	</div>
<!-- end:: Content -->				</div>


<!-- end:: Footer -->			</div>



    <script type="text/javascript">
        const primary = document.getElementById('step_1');
        const primary_2 = document.getElementById('step_2');
        const primary_3 = document.getElementById('step_3');
        const secondary = document.getElementById('nextbtn');
        secondary.style.display = 'none';

        primary.addEventListener("click", somePrimaryAction.bind(this,'1'), false);
        primary_2.addEventListener("click", somePrimaryAction.bind(this,'2') , false);
        primary_3.addEventListener("click", somePrimaryAction.bind(this,'3') , false);
        secondary.addEventListener("click", clickPrimaryButton, false);



        function somePrimaryAction(value,e){
          e.preventDefault();

          if(value ==='1'){
              //check if the form is filled
            var x = document.getElementsByClassName("myform");
            var isComplete = true
            var values =  {}
            for(i=0;i<x.length;i++){
                    values[x[i].name] = x[i].value
                    //console.log(values[x[i].name])
                if(x[i].value === ''){
                    //console.log(x[i].name)

                    isComplete = false;
                    break;
                }
            }
            if(isComplete === false){
                alert('Please fill all fields')
            }
            else{
               // console.log(values)

                for (const [key, value] of Object.entries(values)) {
                    //console.log(key, value)
                    document.getElementById(key+'_val').innerText = value
              }
                secondary.click()
            }
          }
          else if(value ==='2'){

              priorities = []

              priority ={

              }
                var count = 0;
              // get priority values
               $('.priority_unit').each(function(){

                        index = $(this).val()
                        priorities.push(index)

                        count = count + 1;
                  });

               var index = 0
               $('.program_unit').each(function(){

                   priority[priorities[index]] = $(this).val()
                   console.log($(this).val())
                   index+=1
               })

                console.log(priorities)
              console.log(priority)

                var html = '';

               for (const [key, value] of Object.entries(priority)) {
                    //console.log(key, value)
                    html += '<tr>';

                    html+='<th scope="row">'+key+'</th>'
                    html+='<td>'+value+'</td>'


                   {#html+='<td data-field='OrderID' class='kt-datatable__cell'><span style='width: 112px;'>'+key+'</span></td>'#}
                   {# html += '<td>' + key + '</td><td>' + value + '</td></tr>';#}
                    html += '</tr>';
              }
              $('#priority_table').append(html);


                //alert(count);
              secondary.click()
          }
          else if(value === '3'){
              secondary.click()
          }

        }

        function clickPrimaryButton(e){
         // e.preventDefault();
          console.log('you clicked the testing1 button');
          //primary.click();
        }
    </script>
{% endblock %}